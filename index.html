<!DOCTYPE html>
<html lang="en">
<head>
    <title>East Africa Graph</title>
    <script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>
    <style>
        .bar.policeBrutality { fill: #DADAF2; }
        .bar.CSO { fill: #BBDDDD; }
        .bar.freeSpeech { fill: #D7DADD; }
        .bar.protest { fill: #AADDDD; }
        .bar.politicalViolence { fill: #AFCFF3; }
        .bar.war { fill: #AEADD8; }
        .bar.humanRights { fill: #8899AA; }

        .scrollable {
            height: 200px; /* or any value */
            overflow-y: auto;
        }
    </style>

</head>
<body>
    <h1>East Africa Chart</h1>
    <div id="chart"></div>
    <div class="scrollable" id = "listArticles"></div>

</body>

    <script type="text/javascript">

        var w = 500,
            h = 300;

        //setting up svg element
        var svg = d3.select("#chart")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

        var list = d3.select('#listArticles')
            .append("svg")
            .attr("width", 500)
            .attr("height", 200);

        d3.json("allUrls.json", function(json){
            var urls = json;
            var text = list.selectAll(".scrollable")
                .data(urls)
                .enter()
                .append("text")
                .text(function(d){
                    return d.url + "\n";
                })
        });

        //loading data and finding max for chart
    
        d3.json("output.json", function(json) {
    
            var data = json;
    
            var max_n = 0;
            for (var d in data) {
                max_n = Math.max(data[d].n, max_n);
            }
        
            var dx = w / max_n;
            var dy = h / data.length;
    
            // bars
            var bars = svg.selectAll(".bar")
                .data(data)
                .enter()
                .append("rect")
                .attr("class", function(d, i) {return "bar " + d.label;})
                .attr("x", function(d, i) {return 0;})
                .attr("y", function(d, i) {return dy*i;})
                .attr("width", function(d, i) {return dx*d.n})
                .attr("height", dy)
                .on("mouseover", function() {
                 d3.select(this)
                    .attr("stroke", "white");
                 })
                .on("mouseout", function(d, i) {
                    d3.select(this)
                    .attr("stroke", "none");
                });

            // labels
            var text = svg.selectAll("text")
                .data(data)
                .enter()
                .append("text")
                .attr("class", function(d, i) {return "label " + d.label;})
                .attr("x", 5)
                .attr("y", function(d, i) {return dy*i + 20;})
                .text( function(d) {return d.label + " (" + d.n  + ")";})
                .attr("font-size", "15px")
                .style("font-weight", "bold");
        });
    </script>
</html>
